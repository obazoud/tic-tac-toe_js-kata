<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Tic Tac Toe Javascript</title>
        <style type="text/css">
            .hidden {display:none;}
            .error {color:red;}
            .winner {font-weight:bold;}
        </style>
        <script src="offline/jquery-latest.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script>
            "use strict";
            
            var draw = function (id, symbol) {
                $("#"+id).text(symbol);
            }
            var log = function (message, type) {
                $("<div>" + message + "</div>").addClass(type).prependTo("#message");
            }
            
            $(document).ready(function() {
                $("td").click(function(event) {
                    socket.emit('try', { 'pos': this.id });
                });
            });
            
            var socket = io.connect();
            socket.on('message', function (data) {
                log(data.message, data.type);
                if("winner" == data.type || "refresh" == data.type) {
                    $("#replay").show();
                }
            });
            socket.on('play', function (data) {
                draw(data.pos, data.icon);
                log(data.message, data.type);
            });
        </script>
    </head>
    <body>
        <table>
            <tr>
                <td id="1">_</td>
                <td id="2">_</td>
                <td id="3">_</td>
            </tr>
            <tr>
                <td id="4">_</td>
                <td id="5">_</td>
                <td id="6">_</td>
            </tr>
            <tr>
                <td id="7">_</td>
                <td id="8">_</td>
                <td id="9">_</td>
            </tr>
        </table>
        <p id="message"></p>
        <p id="replay" class="hidden"><a href="javascript:document.location.reload();">Play again !</a></p>
    </body>
</html>